(function(b){b.cjBgSlideshow=function(k,qb){function zc(a){"undefined"!==typeof Pa&&clearTimeout(Pa);wa();rb&&(0===L?l&&(l.unbind("load",xa).attr("src","").remove(),l=null):n&&(n.unbind("load",xa).attr("src","").remove(),n=null),rb=!1);$=ia=!1;v?sb(a.value):sb();Ac?($b(),Ac=!1):(Bc(),Pa=setTimeout($b,750))}function Q(a){"undefined"!==typeof Pa&&clearTimeout(Pa);wa();Bc();v?sb(a.value):sb();$b()}function sb(a){v&&(a=a.split("//").join("/"),"/"!==a?(a=a.split("/"),3===a.length?(c=parseInt(a[2],10)- 1,C=a[1]):isNaN(a[1])?(c=0,C=a[1]):(c=parseInt(a[1],10)-1,C="")):(C="/",c=0));!ac&&R?Cc(c):ac=!1}function $b(){var a;if(v)if(Qa=f,"/"!==C&&""!==C)for(a=ja;a--;){if(ka[a]===C){f=a;break}}else f=0;if(I)for(a=ja;a--;)a!==f?la[a].css({opacity:Dc,cursor:"pointer"}):la[f].css({opacity:1,cursor:"default"});Ra&&Ra.fadeIn(300);if(Qa!==f||!Ec){ya=Fc[f];Ec=!0;aa=tb[f];za=Gc[f];Aa=bc[f];Ba=Hc[f];ma=Ic[f];ba=Jc[f];Sa=Kc[f];s=aa.length;Ca=s-1;if(Ad){a=[];var e=[],d=[],y=[],h=[],k=[],l=[],g,j;for(g=0;g<s;g++)a[g]= aa[g],e[g]=za[g],d[g]=Aa[g],y[g]=Ba[g],h[g]=ma[g],k[g]=ba[g],l[g]=Sa[g];aa=[];za=[];Aa=[];Ba=[];ma=[];ba=[];for(Sa=[];0<a.length;)g=Math.random()*a.length|0,j=aa.length,aa[j]=a[g],za[j]=e[g],Aa[j]=d[g],Ba[j]=y[g],ma[j]=h[g],ba[j]=k[g],Sa[j]=l[g],a.splice(g,1),e.splice(g,1),d.splice(g,1),y.splice(g,1),h.splice(g,1),k.splice(g,1),l.splice(g,1)}c>Ca&&(c=0);I&&(Ta=la[f].data("stretch"),cc=la[f].data("center"));R&&(na=dc[f].width,ub=dc[f].height);z.css("left",p);A.css("left",p);vb&&vb();if(null!==t){for(;t.length;)oa[0].unbind("load", Lc).attr("src","").unbind("mousemove",Ua),S[0].stop(!0,!0).empty(),t[0].unbind("mouseover",wb).unbind("mouseout",xb).removeData("id").empty(),t.shift(),oa.shift(),S.shift();J.stop(!0,!0).empty();ec=!1;Va&&M.stop(!0,!0).css("display","none");S=oa=t=null}fc&&Mc()}else Da&&Nc(!0,!1);Oc?Pc(aa[c]+"?img="+(new Date).getTime().toString()):Pc(aa[c]);yb&&(ca.length&&ca.unbind("click",zb),b.data(T,"cjInfoOn")&&Wa.stop(!0,!0).fadeOut(300))}function Pc(a){rb=!0;0===L?(z.css("z-index",parseInt(A.css("z-index"), 10)+1),l=b("<img />").attr("id","cj-img-one").css({display:"none",position:Ab}).addClass("cj-no-select").one("load",xa).appendTo(z),l.attr("src",a)):(A.css("z-index",parseInt(z.css("z-index"),10)+1),n=b("<img />").attr("id","cj-img-two").css({display:"none",position:Ab}).addClass("cj-no-select").one("load",xa).appendTo(A),n.attr("src",a));Bb&&Bb()}function xa(a){a.stopPropagation();rb=!1;0===L?(Xa=l.width()||l[0].width,Ya=l.height()||l[0].height,L=1):(Xa=n.width()||n[0].width,Ya=n.height()||n[0].height, L=0);Ra&&Ra.fadeOut(300);Qc();Cb=!0;if(Rc)Rc=!1,l.fadeIn(U,pa);else if(0===ya)Ta||Sc(),1===L?l.fadeIn(U,pa):n.fadeIn(U,pa);else if(ia?$&&(qa=Db===Ca&&0===c?!0:0===Db&&c===Ca?!1:c>Db?!0:!1):qa=!0,3!==ya){var b;qa?(a=1,b=-1):(a=-1,b=1);1===L?(z.css("left",h*a+p),l.css("display","block"),1===ya&&A.animate({left:h*b+p},U),z.animate({left:p},U,pa)):(A.css("left",h*a+p),n.css("display","block"),1===ya&&z.animate({left:h*b+p},U),A.animate({left:p},U,pa))}else{var d=h+p,y=1===L?l:n;qa?y.css({fontSize:0,clip:"rect(0px, "+ d+"px, "+j+"px, "+d+"px)",display:"block"}).animate({fontSize:100},{duration:U,complete:pa,step:function(a){y.css({clip:"rect(0px, "+d+"px, "+j+"px, "+d*(1-0.01*a)+"px)"})}}):y.css({fontSize:0,clip:"rect(0px, 0px, "+j+"px, 0px)",display:"block"}).animate({fontSize:100},{duration:U,complete:pa,step:function(a){y.css({clip:"rect(0px, "+d*0.01*a+"px, "+j+"px, 0px)"})}})}Db=c}function wa(){Eb&&("undefined"!==typeof Fb&&clearInterval(Fb),w&&(w.closePath(),w.clearRect(0,0,51,51),w=null),null!==N&&(N.remove(), N=null),Ea=null);Gb&&clearTimeout(Gb)}function Sc(){1===L?n&&(n.unbind("load",xa).attr("src","").stop(!0,!0).remove(),n=null):l&&(l.unbind("load",xa).attr("src","").stop(!0,!0).remove(),l=null)}function pa(){Cb=!1;(0!==ya||Ta)&&Sc();null===t&&!Tc&&(Hb&&R?fc||(Mc(),fc=!0):Hb&&(Uc(),Ib=!1,I&&Jb.addClass("cj-no-thumbnails"),q.css({display:"none",visibility:"visible"}).fadeIn(300)),Tc=!0);var a;""===ba[c]?a=!1:(O.stop(!0,!0).css({cursor:"pointer",top:Fa-Vc+V,left:W-Wc+p}).click(Ga).fadeIn(300),a=Kb=!0); wa();var e,d=!0,y;if(I)for(e=ja;e--;)e!==f&&la[e].mouseover(Xc).mouseout(Yc).click(Zc);if(1<s){if(null!==t)for(e=s;e--;)e!==c&&t[e].click(gc);hc&&(Za.click(ic),$a.click(ab));K&&(Eb&&R?(null===N&&(N=b("<canvas />")),N.css({marginLeft:(na>>1)-26,marginTop:(Lb>>1)-26}).appendTo(S[c]),$c()):Gb=setTimeout(jc,kc))}a?y=Ga:""!==ma[c]?y=ad:Bd?y=ab:d=!1;d&&bb.css("cursor","pointer").click(y);bd&&Mb.keydown(cd);ra=!1;Ha=!0;dd&&(yb&&(b.data(T,"cjInfoOn",!1),zb()),dd=!1);Nb&&Nb();yb&&(""!==b.trim(Ba[c])?(ed.html(Ba[c]), b.data(T,"cjInfoOn")&&Wa.stop(!0,!0).css("display","none").fadeIn(300),ca.length&&ca.css("cursor","pointer").removeClass("cj-no-info-hover").click(zb)):ca.length&&ca.addClass("cj-no-info-hover").css("cursor","auto"))}function jc(){$=ia=!1;fd()}function Bc(){ra=!0;Ha=!1;var a;if(I)for(a=ja;a--;)la[a].unbind("click",Zc).unbind("mouseover",Xc).unbind("mouseout",Yc);if(null!==t)for(a=s;a--;)t[a].unbind("click",gc);hc&&(Za.unbind("click",ic),$a.unbind("click",ab));bd&&Mb.unbind("keydown",cd);bb.unbind("click", ab).unbind("click",Ga).unbind("click",ad).css("cursor","auto");cb()}function ad(){"_parent"===Sa[c]?window.location=ma[c]:window.open(ma[c]);db?(K=!0,eb()):(wa(),K=!1,ra||(Ha=!0));"undefined"!==typeof b.cjMusicPlayer&&b.cjMusicPlayer.toggleMusic(!0)}function Ga(a){a.stopPropagation();O.unbind("click",Ga).css("cursor","auto");gd=K;db?(K=!0,eb()):(wa(),K=!1,ra||(Ha=!0));da.css({width:h,height:j}).appendTo(D).fadeIn(500,Cd);Ob=!0}function Cd(){"undefined"!==typeof b.cjMusicPlayer&&b.cjMusicPlayer.toggleMusic(!0); var a=ba[c],e=!1;X=fb;-1!==a.search("youtube.com")?a=Dd.split("{url}").join(a.split("watch?v=")[1]):-1!==a.search("vimeo.com")?a=Ed.split("{url}").join(a.substring(a.lastIndexOf("/"))):-1!==a.search(".mp4")?(e=!0,a=ba[c].split(".mp4")[0],gb.length&&(gb.show(),X+=parseInt(gb.css("height"),10))):a=ba[c];if(e)sa.length&&"undefined"!==typeof b.cjVideoPlayer&&(sa.appendTo(T),Y=b("<video />").attr("id","cj-html-video").attr("width",P).attr("height",fb),e=b.cjVideoPlayer.getValues(),Y.html('<object type="application/x-shockwave-flash" data="'+ hd+'" width="'+P+'" height="'+(fb+28)+'"><param name="movie" value="'+hd+'" /><param name="allowScriptAccess" value="always" /><param name="bgcolor" value="#000000" /><param name="allowfullscreen" value="true" /><param name="wmode" value="gpu" /><param name="flashvars" value="url='+a+"&vol="+e[0]+"&auto="+e[1]+"&width="+P+"&height="+fb+'" /></object>'),b("<source />").attr("type","video/webm").attr("src",a+".webm").prependTo(Y),b("<source />").attr("type","video/ogg").attr("src",a+".ogv").prependTo(Y), b("<source />").attr("type","video/mp4").attr("src",a+".mp4").prependTo(Y),Y.prependTo(sa),ta.appendTo(T).fadeIn(300),Modernizr.video?(e=b.cjVideoPlayer.instance(Pb),Qb=e[0],Rb=e[1]):gb.length&&gb.hide(),Pb(),ea.resize(Pb),sa.fadeIn(300));else{var e=W-(P>>1)+p,d=Fa-(X>>1)+V;Ia=b("<iframe />").attr("type","text/html").attr("width",P.toString()).attr("height",fb.toString()).attr("frameborder",0).attr("src",a).addClass("cj-video-iframe").css({position:ua?"fixed":"absolute",left:e,top:d}).appendTo(da); ta.css({top:d+X,left:e+P}).appendTo(D).show()}ta.click(cb);da.click(cb)}function Pb(){var a=D.offset(),b=a.left+W-(P>>1),a=a.top+(j>>1)-(X>>1);null!==Rb?Rb()||sa.css({left:b,top:a}):sa.css({left:b,top:a});ta.css({left:b+P,top:a+X})}function cb(a){a?(a.stopPropagation(),a=!0):a=!1;da.unbind("click",cb);ta.unbind("click",cb).stop(!0,!0);Kb&&(a?O.css("cursor","pointer").click(Ga):(O.unbind("click",Ga).css("cursor","auto").fadeOut(250,Fd),Kb=!1));Ob&&(a?(null!==Ia&&Ia.empty().remove(),da.stop(!0,!0).fadeOut(500, Gd)):(da.stop(!0,!0).css("display","none").empty().detach(),"undefined"!==typeof b.cjMusicPlayer&&b.cjMusicPlayer.toggleMusic(!1)),null!==Y&&(null!==Qb&&Qb(),Y.empty().remove(),ea.unbind("resize",Pb),sa.css("display","none"),Qb=Rb=Y=null),Ia=null,ta.hide(),Ob=!1,gd&&(db?(K=!1,eb()):(K=!0,id())))}function Fd(){O.hide()}function Gd(){da.empty().detach();"undefined"!==typeof b.cjMusicPlayer&&b.cjMusicPlayer.toggleMusic(!1)}function hb(a,e){null!==a&&(a.stopPropagation(),e=b(this).data("isOpen"));if(Ib){var d= E?u.outerHeight(!0):0,d=-q.outerHeight(!0)+d,c=parseInt(m.css("top"),10);q.css("bottom",d).data("hidden",!0);m.data("top",c);c-=d;m.css("top",c);x.css("top",c);lc&&(Z.hide(),va.show());E&&u.css("display","none").fadeIn(300)}else e?(d=E?u.outerHeight(!0):0,d=-q.outerHeight(!0)+d,q.stop(!0,!0).data("hidden",!0).animate({bottom:d},200),Da&&(d=m.data("top")-d,m.animate({top:d},200),x.animate({top:d},200)),Z.hide(),va.show()):(q.stop(!0,!0).data("hidden",!1).animate({bottom:0},200),Da&&(d=m.data("top"), m.animate({top:d},200),x.animate({top:d},200)),va.hide(),Z.show())}function zb(){b.data(T,"cjInfoOn")?(b.data(T,"cjInfoOn",!1),Wa.stop(!0,!0).fadeOut(300)):(b.data(T,"cjInfoOn",!0),Wa.stop(!0,!0).css("display","none").fadeIn(300))}function Xc(){b(this).css("opacity",1)}function Yc(){b(this).css("opacity",Dc)}function Zc(a){a.stopPropagation();ia=!0;$=!1;qa=!0;ra||(v?b.address.value(ka[b(this).data("id")]):(f=b(this).data("id"),c=0,Q(),Qa=f))}function cd(a){switch(a.keyCode){case 39:ab();break;case 37:ic(); break;case 40:hb(null,!0);break;case 38:hb(null,!1)}}function ic(a){a&&a.stopPropagation();ia=!0;qa=$=!1;0<c?(c--,v?b.address.value(C.split("/").join("")+"/"+(c+1).toString()):Q()):(a=0<f?f-1:catLeg,c=tb[a].length-1,v?b.address.value(ka[a]+"/"+(c+1).toString()):(f=a,Q(),Qa=f))}function ab(a){a&&a.stopPropagation();qa=ia=!0;$=!1;fd()}function fd(){c<Ca?(c++,v?b.address.value(C.split("/").join("")+"/"+(c+1).toString()):Q()):(c=0,v?b.address.value(ka[f<catLeg?f+1:0]):(f<catLeg?f++:f=0,Q(),Qa=f))}function eb(a){a&& a.stopPropagation();K?(wa(),fa.hide(),ga.show(),K=!1,ra||(Ha=!0)):(ga.hide(),fa.show(),K=!0,Ha&&id())}function Mc(){oa=[];S=[];t=[];ib=0;for(var a,e=0;e<s;e++)a=b("<div />").data("id",e).addClass("cj-thumb-div").width(na).height(ub).appendTo(J),oa[e]=b("<img />").addClass("cj-thumb-image").one("load",Lc).appendTo(a),S[e]=b("<div />").addClass("cj-thumb-hover").css({width:na,height:ub,opacity:e!==c?0:mc}).appendTo(a),t[e]=a;Lb=a.outerHeight(!0);Ja=a.outerWidth(!0)-na;ha=na+Ja;Ja-=parseInt(a.css("borderLeftWidth"), 10)<<1;jd=Ja<<1;kd=ha*s;ld=(ub>>1)-md;r=0;nd()&&(nc(),m.fadeIn(300),x.fadeIn(300));q.css("visibility","visible");ec=!0;t[0].addClass("cj-thumb-div-first");oa[0].attr("src",Aa[0]);q.data("hidden")&&(a=E?u.outerHeight(!0):0,a=-q.outerHeight(!0)+a,e=m.data("top")-a,q.stop(!0,!0).css("bottom",a),m.css("top",e),x.css("top",e));Ib&&(Hd&&(E&&lc)&&hb(null),Ib=!1)}function nc(){m.stop(!0,!0).css("display","block").unbind("click",F).unbind("mouseover",G).unbind("mouseout",H);x.stop(!0,!0).css("display","block").unbind("click", F).unbind("mouseover",G).unbind("mouseout",H);r<s-B?x.css({cursor:"pointer",opacity:1}).mouseover(G).mouseout(H).click(F):x.css({cursor:"auto",opacity:Sb}).removeClass("cj-thumb-arrow-hover");0<r?m.css({cursor:"pointer",opacity:1}).mouseover(G).mouseout(H).click(F):m.css({cursor:"auto",opacity:Sb}).removeClass("cj-thumb-arrow-hover")}function Lc(a){a.stopPropagation();ib<Ca&&(ib++,oa[ib].attr("src",Aa[ib]));a=b(this).parent().data("id");a!==c&&t[a].css("cursor","pointer").mouseover(wb).mouseout(xb).click(gc); b(this).fadeIn(300)}function nd(a){B=(h-80)/ha|0;B=Math.min(B,oc);B=Math.min(B,s);pc=B-1;var b=B*ha+Ja,d=b>>1;J.parent().css("width",b-jd);J.css({width:kd,height:Lb});q.css({left:W-d+p,width:b});E&&u.css({marginLeft:d-qc});Nc(!1,a);if(B<s){a&&nc();if(a=q.data("hidden"))d=E?u.outerHeight(!0):0,q.stop(!0,!0).css("bottom",-q.outerHeight(!0)+d);var c=D.offset(),f=q.offset(),d=J.offset().top-c.top+ld+V;m.css({top:d,left:f.left-c.left-od+p});x.css({top:d,left:f.left-c.left+b+p});Da=!0;a?(b=E?u.outerHeight(!0): 0,m.data("top",d+(-q.outerHeight(!0)+b))):m.data("top",d)}else m.stop(!0,!0).unbind("click",F).unbind("mouseover",G).unbind("mouseout",H).removeClass("cj-thumb-arrow-hover").css("display","none"),x.stop(!0,!0).unbind("click",F).unbind("mouseover",G).unbind("mouseout",H).removeClass("cj-thumb-arrow-hover").css("display","none"),Da=!1;return Da}function Nc(a,b){if(b)r=c,0!==c&&c+B>s&&(r=s-B),J.stop(!0,!0).css("marginLeft",r*-ha);else{if(0===c)r=0;else if(c>r+pc)for(;c>r+pc;)r++;a?J.stop(!0).animate({marginLeft:r* -ha},500):J.stop(!0,!0).css("marginLeft",r*-ha)}nc()}function wb(a){a.stopPropagation();b(this).children("div").stop(!0).fadeTo(300,mc);var e=b(this).data("id");if(Va&&""!==za[e]){if(ua)Tb=Ub=0;else{var d=D.offset();Ub=d.top;Tb=d.left}M.stop(!0,!0).html(za[e]);rc=M.outerHeight(!0)+10;sc=M.outerWidth(!0)>>1;M.css({display:"none",top:a.pageY-Ub-rc,left:a.pageX-Tb-sc}).fadeIn(300);b(this).mousemove(Ua)}}function xb(a){a.stopPropagation();b(this).children("div").stop(!0).fadeTo(300,0);Va&&(b(this).unbind("mousemove", Ua),M.stop(!0,!0).fadeOut(200))}function Ua(a){a.stopPropagation();M.css({top:a.pageY-Ub-rc,left:a.pageX-Tb-sc})}function gc(a){a.stopPropagation();ra||($=ia=!0,a=b(this).data("id"),Cc(a),Va&&(b(this).unbind("mousemove",Ua),M.stop(!0,!0).fadeOut(200)),ac=!0,v?b.address.value(C.split("/").join("")+"/"+(a+1).toString()):(c=a,Q()))}function F(a){a.stopPropagation();if(b(this).data("right"))if(r<s-B)r++,r===s-B&&x.unbind("click",F).unbind("mouseover",G).unbind("mouseout",H).removeClass("cj-thumb-arrow-hover").css({cursor:"auto", opacity:Sb}),m.unbind("click",F).unbind("mouseover",G).unbind("mouseout",H).css({cursor:"pointer",opacity:1}).mouseover(G).mouseout(H).click(F);else return;else if(0<r)r--,0===r&&m.unbind("click",F).unbind("mouseover",G).unbind("mouseout",H).removeClass("cj-thumb-arrow-hover").css({cursor:"auto",opacity:Sb}),x.unbind("click",F).unbind("mouseover",G).unbind("mouseout",H).css({cursor:"pointer",opacity:1}).mouseover(G).mouseout(H).click(F);else return;J.stop(!0).animate({marginLeft:r*-ha},300)}function G(a){a.stopPropagation(); b(this).addClass("cj-thumb-arrow-hover")}function H(a){a.stopPropagation();b(this).removeClass("cj-thumb-arrow-hover")}function Cc(a){for(var b=s;b--;)b!==a?(S[b].stop(!0,!0).css("opacity",0),t[b].stop(!0,!0).css("cursor","pointer").mouseover(wb).mouseout(xb)):(S[b].stop(!0,!0).css("opacity",mc),t[b].unbind("mouseover",wb).unbind("mouseout",xb).css("cursor","auto"),!$&&Va&&(t[b].unbind("mousemove",Ua),M.stop(!0,!0).fadeOut(200)))}function id(){Eb&&R?(null===N&&(N=b("<canvas />")),N.css({marginLeft:(na>> 1)-26,marginTop:(Lb>>1)-26}).appendTo(S[c]),$c()):Gb=setTimeout(jc,kc)}function $c(){jb=1;Ea=N[0];w=Ea.getContext("2d");Ea.width=51;Ea.height=51;w.lineWidth=10;w.strokeStyle="#000";Fb=setInterval(Id,Jd)}function Id(){pd=qd+0.02*jb*Math.PI;w.clearRect(0,0,51,51);w.beginPath();w.arc(26,26,13,qd,pd,!1);w.stroke();w.save();100>jb?jb+=1:(clearInterval(Fb),w.closePath(),Ea=w=null,jc())}function Uc(){q.css({left:W-tc});E&&u.css({marginLeft:tc-qc})}function Qc(a){ua&&(h=ea.width()-rd,h=Math.max(h,sd),W=h>> 1,j=ea.height()-td,Fa=j>>1);if("undefined"!==typeof l){a="object"===typeof a?!0:!1;var b=h/Xa,d=j/Ya,c,f;a&&Cb&&(Cb=!1,l&&l.stop(!0,!0),n&&n.stop(!0,!0),z.stop(!0,!0),A.stop(!0,!0));Ta?(d=b>d?b:d,b=Math.ceil(Xa*d),d=Math.ceil(Ya*d),cc?(b>h?c=b-h>>1:c=0,d>j?f=d-j>>1:f=0):f=c=0):(d=b>d?d:b,b=Math.ceil(Xa*d),d=Math.ceil(Ya*d),h>b?c=-(h-b>>1):c=0,j>d?f=-(j-d>>1):f=0);1===L?(z.css({width:h,height:j}),l&&l.width(b).height(d).css({marginTop:-f,marginLeft:-c})):(A.css({width:h,height:j}),n&&n.width(b).height(d).css({marginTop:-f, marginLeft:-c}));a&&(l&&l.css("clip","auto"),n&&n.css("clip","auto"),ec?nd(!0):Hb&&Uc(),Ob&&(da.css({width:h,height:j}),null!==Ia&&(c=W-(P>>1)+p,f=Fa-(X>>1)+V,Ia.css({left:c,top:f}),ta.css({left:c+P,top:f+X}))),Kb&&O.css({top:Fa-Vc+V,left:W-Wc+p}),bb&&bb.css({width:h,height:j}))}}var D=b("#cj-gallery");if(D.length){var mc=k.thumbHoverOpacity,hd=qb.videoFallbackSwf,kc=k.transitionDelay,Dc=k.categoryOpacity,dd=k.showInfoByDefault,Bd=k.bgClickLoadsNext,Hd=k.hideThumbnails,Ad=k.randomizeImages,bd=k.keyboardControls, fb=qb.videoHeight,v=k.useDeepLink,P=qb.videoWidth,oc=k.maxThumbs,U=k.transitionTime,R=k.useThumbs,ud=k.autoPlay,ua=k.fullScreen,td=k.offsetHeight,rd=k.offsetWidth,p=k.offsetX,V=k.offsetY,vb,qc,Bb,Nb,Sa,tc,ba,gd,ma,db,ha,md,od,Ba,kd,ld,Fb,Ja,jd,Lb,oa,S,pc,ib,na,$,qa,Aa,ub,rc,ia,Ta,B,cc,sc,X,h,W,j,Pa,Ya,w,za,Tb,bb,O,Ub,Ea,Xa,l,n,ya,Db,Gb,jb,aa,C,Fa,Ca,c,pd,s,Ra,L=0,f=0,Qa=0,r=0,sd=600,Sb=0.75,qd=1.5*Math.PI,Jd=kc/100,Eb=Modernizr.canvas,Ia=null,t=null,N=null,Rb=null,Y=null,Qb=null,Tc=!1,Kb=!1,fc=!1, Da=!1,Ha=!1,ec=!1,Ob=!1,Ib=!0,rb=!1,ac=!1,Rc=!0,Ac=!0,Cb=!1,Ec=!1,ra=!1,tb=[],Ic=[],Hc=[],dc=[],Fc=[],bc=[],la=[],Jc=[],Kc=[],Gc=[],ka=[],ea=b(window),Mb=b(document),T=b("body"),z=b("<div />"),A=b("<div />"),va=b(".cj-up-icon"),uc=b("#cj-bg-images").children("ul"),ga=b(".cj-play-icon"),Za=b(".cj-left-icon"),ca=b(".cj-info-icon"),$a=b(".cj-right-icon"),fa=b(".cj-pause-icon"),Z=b(".cj-close-icon"),Jb=b("#cj-categories"),Wa=b("#cj-image-info"),Kd=b(".cj-close-info"),M=b("#cj-thumb-tooltip"),q=b("#cj-footer"), J=b("#cj-thumbnails"),gb=b("#cj-vid-controls"),ed=b("#cj-image-info-text"),sa=b("#cj-video-player"),u=b("#cj-gallery-controls"),ta=b("<div />").addClass("cj-video-close"),da=b("<div />").addClass("cj-video-lightbox").css({top:V,left:p});O=b("<div />").addClass("cj-video-button").appendTo(D);var x=b("<div />").addClass("cj-thumb-right").data("right",!0),m=b("<div />").addClass("cj-thumb-left").data("right",!1),Vc=parseInt(O.css("height"),10)>>1,Wc=parseInt(O.css("width"),10)>>1,vd=qb.autoPlayVideo? "1":"0",Ab=ua?"fixed":"absolute",K=ud,ja=uc.length,Vb=navigator.userAgent.toLowerCase(),Oc=-1!==Vb.search("webkit"),I=Jb.length,wd="ontouchend"in document,xd=600>ea.width(),yd=wd&&!xd,Ld=wd&&xd,Hb=q.length,hc=$a.length&&Za.length;db=ga.length&&fa.length;var lc=Z.length&&va.length,E=u.length,Va=k.useThumbToolTip&&M.length,yb=Wa.length&&ed.length,Ed="http://player.vimeo.com/video{url}?title=0&byline=0&portrait=0&autoplay="+vd,Dd="http://www.youtube.com/embed/{url}?autoplay="+vd+"&autohide=1&hd=1&iv_load_policy=3&showinfo=0&showsearch=0&wmode=transparent"; b.cjBgSlideshow.getPhone=function(){return Ld};b.cjBgSlideshow.getTablet=function(){return yd};if(0!==ja){yd&&b("head").append('<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />');k.disableRightClick&&Mb.bind("contextmenu",function(a){a.preventDefault()});Mb.find("#cj-preloader").length&&(Ra=b("#cj-preloader"));if(!R||!k.useCanvasAnimation)Eb=!1;J.length||(R=!1);0===oc&&(oc=999);var Wb,kb,lb,Xb,Ka,Yb,Zb,La,vc,mb,nb,Ma,ob,Na,wc,pb,xc,Oa,zd=!1;if(-1!==Vb.search("msie")){var yc= Vb.substr(Vb.indexOf("msie")+4);ua&&7===yc&&(zd=!0);u.length&&8<yc&&u.addClass("cj-gc-fix");8===yc&&(Oc=!0)}1===ja&&I&&(Jb.css("display","none"),I=!1);uc.each(function(a){kb=[];lb=[];Wb=[];vc=[];ob=[];nb=[];Ma=[];b(this).children("li").each(function(a){Xb=b(this).find(".cj-large");Ka=b(this).find(".cj-thumb");Yb=b(this).find(".cj-video");Zb=b(this).find(".cj-info");La=b(this).find(".cj-link");Xb.length?Xb.attr("title")&&(Wb[a]=Xb.attr("title")):Wb[a]="";Ka.length?Ka.attr("title")&&(vc[a]=Ka.attr("title"), ""!==b.trim(Ka.text())?kb[a]=Ka.html():kb[a]=""):(bc[a]="",kb[a]="");Zb.length?""!==b.trim(Zb.text())?nb[a]=Zb.html():nb[a]="":nb[a]="";Yb.length?Yb.attr("title")?ob[a]=Yb.attr("title"):ob[a]="":ob[a]="";La.length?La.attr("title")?(lb[a]=La.attr("title"),La.attr("data-rel")?Ma[a]=La.attr("data-rel"):Ma[a]="_parent"):(lb[a]="",Ma[a]=""):(lb[a]="",Ma[a]="")});b(this).attr("class")?(Oa=b(this).attr("class"),-1===Oa.search("fit")?(pb=!0,mb=-1===Oa.search("center")?!1:!0):(pb=!1,mb=!0),-1!==Oa.search("fade")|| zd?Na=0:-1!==Oa.search("slide")?-1===Oa.search("over")?Na=1:Na=2:Na=3):(Na=pb=!0,mb=!1);xc=b(this).attr("title");b(this).removeAttr("title");ka[a]=xc.toLowerCase().split(" ").join("_");I&&(la[a]=b("<div />").addClass("cj-category").html(xc).data({id:a,stretch:pb,center:mb}).appendTo(Jb));b(this).attr("data-rel")&&(wc=b(this).attr("data-rel").split("x"),dc[a]={width:parseInt(wc[0],10),height:parseInt(wc[1],10)});tb[a]=Wb;Hc[a]=nb;Fc[a]=Na;Jc[a]=ob;bc[a]=vc;Kc[a]=Ma;Ic[a]=lb;Gc[a]=kb});I||(Ta=pb,cc= mb);yb?Kd.click(zb):ca.length&&ca.hide();!I&&R?J.addClass("cj-no-categories"):!I&&(!R&&E)&&(u.css("height",u.height()+parseInt(u.css("padding-top"),10)),b("#cj-footer-container").addClass("cj-footer-controls-only"),Z.length&&Z.hide());Hb&&E&&(tc=q.outerWidth(!0)>>1,lc?(Z.data("isOpen",!0).click(hb),va.hide().data("isOpen",!1).click(hb)):(Z.length&&Z.hide(),va.length&&va.hide()));db?(ga.click(eb),fa.click(eb),ud?(ga.hide(),fa.show()):(fa.hide(),ga.show())):(fa.length&&fa.hide(),ga.length&&ga.hide()); hc||($a.length&&$a.hide(),Za.length&&Za.hide());qc=E?u.outerWidth(!0)>>1:null;O.css({display:"none",visibility:"visible"});catLeg=tb.length-1;z.css({position:Ab,overflow:"hidden",zIndex:-1E4});A.css({position:Ab,overflow:"hidden",zIndex:-1E4});ua?(h=ea.width()-rd,h=Math.max(h,sd),j=ea.height()-td,z.css({top:V,left:p}),A.css({top:V,left:p}),D.css({top:V,left:p}),T.prepend(z).prepend(A).append(m).append(x)):(h=k.customWidth,j=k.customHeight,D.append(m).append(x),D.css({width:h,height:j,position:"relative"}).prepend(z).prepend(A), b("<div />").css({width:h,height:j,position:"absolute",backgroundColor:k.backgroundColor?k.backgroundColor:"#000",zIndex:-10001}).prependTo(D));bb=b("<div />").css({width:h,height:j,position:"fixed"}).addClass("cj-bg-click").prependTo(D);W=h>>1;Fa=j>>1;md=parseInt(m.css("height"),10)>>1;od=parseInt(m.css("width"),10);v?(b.address.internalChange(Q),b.address.externalChange(zc),cjAjaxVersion&&b.address.update()):(c=0,zc());ua&&ea.resize(Qc);uc=k=null}b.cjBgSlideshow.getCatOn=function(){return f};b.cjBgSlideshow.getIsOn= function(){return c};b.cjBgSlideshow.getHash=function(){return C};b.cjBgSlideshow.setURL=function(a){v&&"undefined"!==typeof a&&b.address.value(a)};b.cjBgSlideshow.setCategory=function(a,e){"undefined"!==typeof a&&(-1<a&&a<ja)&&(v?isNaN(e)?b.address.value(ka[a]):-1<e&&e<s&&b.address.value(ka[a]+"/"+e):(f=a,typeof e===Number&&(c=e),Q()))};b.cjBgSlideshow.setImage=function(a){"undefined"!==typeof a&&(-1<a&&a<s)&&(v?b.address.value(C.split("/").join("")+"/"+(a+1).toString()):(c=a,Q()))};b.cjBgSlideshow.addCallback= function(a,b){if("undefined"!==typeof a&&"undefined"!==typeof b)switch(a.toLowerCase()){case "categorychange":vb=b;break;case "imagechange":Bb=b;break;case "imageloaded":Nb=b}};b.cjBgSlideshow.removeCallback=function(a){if("undefined"!==typeof a)switch(a.toLowerCase()){case "categorychange":vb=null;break;case "imagechange":Bb=null;break;case "imageloaded":Nb=null}}}}})(jQuery);