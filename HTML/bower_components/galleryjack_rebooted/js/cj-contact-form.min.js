(function(a){a.cjContact=function(b){function i(b){b.preventDefault();b.stopPropagation();e&&e.stop(!0,!0).css("display","none");var c,g,f,j,h,k=!0;d.children("fieldset").children().each(function(){h=!1;a(this).attr("name")&&(a(this).attr("type")&&"text"===a(this).attr("type")&&(h=!0),a(this).is("textarea")&&(h=!0));if(h&&(c=a(this).attr("name"),g=this.value,-1!==c.search("required"))){if(""===g||g===a(this).data("original"))this.value=l+c.split("-required")[0],k=!1;if("email-required"===c&&(f=g.indexOf("@"), j=g.lastIndexOf("."),0===f||j<f+2||j+2>=g.length))this.value=m,k=!1}});k&&(a.ajax({type:"POST",url:p,data:d.serialize(),success:q}),d.unbind("submit",i).children("fieldset").children().each(function(){if(a(this).data("original"))this.value=a(this).data("original")}),d.submit(i))}function q(){f=!0;e?e.stop(!0,!0).fadeIn():e=a("<p />").addClass("cj-success-message").text(r).insertBefore(a("#cj-submit")).fadeIn()}function n(){e&&f&&(e.stop(!0,!0).fadeOut(),f=!1);var b=this.value;if(b===a(this).data("original")|| b===l+a(this).attr("name").split("-required")[0]||b===m)this.value="";a(this).addClass("cj-field-focus")}function o(){if(""===this.value)this.value=a(this).data("original");a(this).removeClass("cj-field-focus")}if(b){var m=b.emailErrorMessage?b.emailErrorMessage:"Please enter a valid email",l=b.emptyTextMessage?b.emptyTextMessage+" ":"Please fill in your",r=b.successMessage?b.successMessage:"Your message has been sent",p=b.contactPhpFile?b.contactPhpFile:"php/cj-contact.php",d=a("#cj-contact-form"), f=!1,e,c;d.length&&(d.find("input").each(function(){a(this).attr("type")&&(c=a(this).attr("type"),"hidden"!==c&&"image"!==c&&"submit"!==c&&a(this).attr("value")&&a(this).data("original",a(this).attr("value")).focus(n).blur(o))}),d.find("textarea").each(function(){a(this).data("original",a(this).text()).focus(n).blur(o)}),d.submit(i));c=b=null}}})(jQuery);