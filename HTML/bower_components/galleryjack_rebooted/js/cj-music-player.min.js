(function(a){a.cjMusicPlayer=function(j){function G(k){k.stopPropagation();a(this).addClass("cj-button-hover")}function H(k){k.stopPropagation();a(this).removeClass("cj-button-hover")}function P(a){a.stopPropagation();l=!1;v(null)}function v(k){"undefined"!==typeof p&&clearInterval(p);null!==k?a(this).data("isArrow")?(k=a(this).data("isRight")?!0:!1)?d<I?d++:d=0:0<d?d--:d=I:k=!0:(d<I?d++:d=0,k=!0);if(A)f.pause(),f.currentTime=0,J?q.children("source").each(function(){a(this).attr("src",r[d])}):f.src= Modernizr.audio.mp3?r[d]:r[d].split("mp3").join("ogg"),f.volume=w,f.load(),f.play(),x=!0;else try{B("cj-fallback").changeSong(k)}catch(b){}C&&D.html(K[d]);E&&y.html((d+1).toString()+L+m.toString());s.css("display","none");t.css("display","inline-block");l=!0}function z(a){a&&a.stopPropagation();"undefined"!==typeof p&&clearInterval(p);if(l){u?(t.css("display","none"),s.css("display","inline-block")):h.length&&(h.unbind("mouseover",G).unbind("mouseout",H),h.addClass("cj-button-hover"));if(A)!M&&!J? (g=w,N(),p=setInterval(N,80)):f.pause();else try{B("cj-fallback").togglePlayPause(!1)}catch(b){}l=!1}else{u?(s.css("display","none"),t.css("display","inline-block")):h.length&&(h.removeClass("cj-button-hover"),h.mouseover(G).mouseout(H));if(A)f.play(),x&&(!M&&!J)&&(p=setInterval(Q,80));else try{B("cj-fallback").togglePlayPause(!0)}catch(c){}x=l=!0}}function N(){0<g?(g-=0.05,0>g&&(g=0)):(clearInterval(p),f.pause());f.volume=g}function Q(){g<w?(g+=0.05,1<g&&(g=1)):clearInterval(p);f.volume=g}function B(a){return-1!= navigator.appName.indexOf("Microsoft")?window[a]:document[a]}var h=a("#cj-music-button");if(h.length&&j){var w,m,q,f,p,y,d=0,l,C,F,L,g,x,c,E;a(document);c=j.songList;m=c.length;var I=m-1,K=[],r=[],e,b,s,t,D,n=navigator.userAgent.toLowerCase(),M=-1!==n.search("firefox"),J=-1!==n.search("msie"),u=1<m?!0:!1,n=j.autoPlay?!0:!1,A=Modernizr.audio?!0:!1;if(c)if(c.length){if(j.randomizeSongs){e=[];for(b=0;b<m;b++)e[b]=c[b];for(c=[];0<e.length;)b=Math.random()*e.length|0,c[c.length]=e[b],e.splice(b,1)}for(b= 0;b<m;b++)r[b]=c[b].url,K[b]=c[b].title?c[b].title:"";if(c=a.cjBgSlideshow.getTablet())e=a("#cj-music-controls"),e.length&&e.addClass("cj-music-fix"),e=a("#cj-music-meta"),e.length&&e.addClass("cj-music-meta-fix");if(c||a.cjBgSlideshow.getPhone())n=!1;q=a("#cj-music").css({position:"fixed",top:-50});a("<source />").attr("src",r[0]).attr("type","audio/mpeg").prependTo(q);a("<source />").attr("src",r[0].split("mp3").join("ogg")).attr("type","audio/ogg").prependTo(q);n?(q.attr("autoplay","autoplay"), x=!0):x=!1;u||q.attr("loop","loop");f=q[0];w=j.hasOwnProperty("volume")?0.01*j.volume:0.75;if(A)f.volume=w,f.addEventListener("ended",P,!1);else try{B("cj-fallback").storeVars(w,r,n)}catch(R){}n?l=!0:l=!1;!u&&h.length&&n&&h.addClass("cj-button-hover").mouseover(G).mouseout(H);s=a(".cj-music-play");t=a(".cj-music-pause");y=a(".cj-music-numbers");D=a(".cj-current-song");e=a(".cj-music-left").data("isArrow",!0);b=a(".cj-music-right").data({isArrow:!0,isRight:!0});c=e.length&&b.length?!0:!1;j=s.length&& t.length?!0:!1;C=D.length?!0:!1;y.length?(E=!0,L=y.html()):usingtNumbers=!1;if(!C&&!E){var O=a("#cj-music-controls");O.length&&O.addClass("cj-music-controls-no-meta")}0===m&&c&&(e.css("display","none"),b.css("display","none"),c=!1);j&&!n&&(t.css("display","none"),s.css("display","inline-block"));c&&(e.click(v),b.click(v));j&&(s.click(z),t.click(z));C&&D.html(K[d]);E&&y.html((d+1).toString()+L+m.toString());c=null}else h.length&&h.hide();j=null;a.cjMusicPlayer.toggleMusic=function(a){"undefined"!== typeof a&&(a?l?(F=!0,z()):F=!1:F&&(F=!1,z()))};a.cjMusicPlayer.changeSong=function(a){"undefined"!==typeof a&&(-1<a&&a<m)&&(d=a,v(!0))};a.cjMusicPlayer.nextSong=function(){v(null)};a.cjMusicPlayer.hasMultiple=function(){u||z();return u};a.cjMusicPlayer.checkMultiple=function(){return u};a.cjMusicPlayer.flashChange=function(){l=!1;v(null)}}}})(jQuery);function cjFromFlash(){jQuery.cjMusicPlayer.flashChange()};